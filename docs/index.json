[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "source/.external-ecmascript.js",
    "static": true,
    "longname": "source/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 49,
    "kind": "external",
    "name": "http~ClientRequest",
    "externalLink": "https://nodejs.org/dist/latest/docs/api/http.html#http_class_http_clientrequest",
    "memberof": "source/.external-nodejs.js",
    "static": true,
    "longname": "source/.external-nodejs.js~http~ClientRequest",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 50,
    "kind": "file",
    "name": "source/index.js",
    "content": "#! /usr/bin/env node\n\nconst  Path = require('path'),  FS = require('fs-extra');\n\nconst  Command = require('commander'),  Config = require('../package.json');\n\nrequire('babel-register');  require('babel-polyfill');\n\nconst  Package = require('./Package').default,  utility = require('./utility');\n\n\nCommand.version( Config.version ).usage('[options] <entry file> [bundle file]')\n    .arguments('<entry file> [bundle file]')\n    .option(\n        '-a, --include-all',\n        'Bundle all dependencies (include those in \"./node_modules/\")'\n    )\n    .option(\n        '-m, --module-map <name pairs>',  [\n            'Map to replace some dependencies to others',\n            '(For example:  old_1:new_1,/some_/i:new_2)'\n        ].join(' ')\n    )\n    .option('-s, --std-out',  'Write into \"stdout\" without logs')\n    .parse( process.argv );\n\n\nconst entry_file = Command.args[0], module_map = new Map();\n\n(Command.moduleMap || '').replace(\n    /(.+?):([^,]+)/g,\n    (_, oldName, newName)  =>\n        module_map.set(utility.toRegExp( oldName ) || oldName,  newName)\n);\n\nconst bundle_file = (\n        Command.args[1] ||\n        Path.join(entry_file,  '../../',  Path.basename( entry_file ))\n    ) + '.js',\n    pack = new Package(\n        entry_file,  Command.includeAll,  module_map,  Command.stdOut\n    );\n\nif (! Command.stdOut)  console.time('Package bundle');\n\nconst code = pack.bundle( Path.basename( bundle_file ).split('.')[0] );\n\nif ( Command.stdOut )\n    process.stdout.write( code );\nelse {\n    FS.outputFileSync(bundle_file,  code);\n\n    console.info( '-'.repeat( 30 ) );\n\n    console.timeEnd('Package bundle');\n\n    console.info(`Module count: ${pack.length}`);\n}\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/source/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 51,
    "kind": "variable",
    "name": "Path",
    "memberof": "source/index.js",
    "static": true,
    "longname": "source/index.js~Path",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 3,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 52,
    "kind": "variable",
    "name": "Command",
    "memberof": "source/index.js",
    "static": true,
    "longname": "source/index.js~Command",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 5,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 53,
    "kind": "variable",
    "name": "Package",
    "memberof": "source/index.js",
    "static": true,
    "longname": "source/index.js~Package",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 54,
    "kind": "variable",
    "name": "entry_file",
    "memberof": "source/index.js",
    "static": true,
    "longname": "source/index.js~entry_file",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 28,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 55,
    "kind": "variable",
    "name": "bundle_file",
    "memberof": "source/index.js",
    "static": true,
    "longname": "source/index.js~bundle_file",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 56,
    "kind": "variable",
    "name": "code",
    "memberof": "source/index.js",
    "static": true,
    "longname": "source/index.js~code",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/index.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 57,
    "kind": "file",
    "name": "source/Module.js",
    "content": "import {EventEmitter} from 'events';\n\nimport {dirname, join} from 'path';\n\nimport {readFileSync} from 'fs';\n\nimport * as Utility from './utility';\n\n\nconst AMD_CJS = ['require', 'exports', 'module'];\n\n/**\n * Key for module path & value for local variable\n *\n * @typedef {Object} DependencyMap\n */\n\n\n/**\n * CommonJS or AMD module\n */\nexport default  class Module extends EventEmitter {\n    /**\n     * @param {string}  name               - Path of this module\n     * @param {string}  [path='.']         - Root path of the package which this module belongs to\n     * @param {boolean} [includeAll=false] - Treat NPM modules as CommonJS modules\n     * @param {Map}     [nameMap]          - Map to replace some dependencies to others\n     */\n    constructor(name,  path = '.',  includeAll = false,  nameMap) {\n        /**\n         * Path of this module\n         *\n         * @type {string}\n         */\n        super().name = name;\n\n        /**\n         * Directory path of this module\n         *\n         * @type {string}\n         */\n        this.base = dirname( name ).replace(/\\\\/g, '/');\n\n        /**\n         * Root path of the package which this module belongs to\n         *\n         * @type {string}\n         */\n        this.path = path;\n\n        /**\n         * @type     {Object}\n         * @property {DependencyMap} compile - Compile-time dependency from AMD\n         * @property {DependencyMap} runtime - Runtime dependency from CommonJS\n         * @property {DependencyMap} outside - Outside dependency from NPM\n         */\n        this.dependency = {\n            compile:  { },\n            runtime:  { },\n            outside:  includeAll ? null : { }\n        };\n\n        /**\n         * Key for original name of a module & value for module name of the replacement\n         *\n         * @type {Object}\n         */\n        this.nameMap = nameMap  ||  new Map();\n\n        /**\n         * Count of direct references to this module\n         *\n         * @type {number}\n         */\n        this.referCount = 0;\n\n        /**\n         * Depth of this module on the dependency tree\n         *\n         * @type {number}\n         */\n        this.depth = 0;\n    }\n\n    /**\n     * @protected\n     *\n     * @param {string} name - Name of a module\n     *\n     * @return {string}\n     */\n    static identifierOf(name) {  return  name.replace(/\\W+/g, '_');  }\n\n    /**\n     * Identifier of this module in JS code\n     *\n     * @type {string}\n     */\n    get identifier() {  return  Module.identifierOf( this.name );  }\n\n    /**\n     * Paths of all the dependency needed to be bundled\n     *\n     * @type {string[]}\n     */\n    get dependencyPath() {\n\n        return  Object.keys( this.dependency.compile ).concat(\n            Object.keys( this.dependency.runtime )\n        );\n    }\n\n    /**\n     * @protected\n     *\n     * @param {number} depth - New depth of this module\n     *\n     * @return {Module} This module\n     */\n    countUp(depth) {\n\n        this.referCount++;  this.depth = Math.max(this.depth, depth);\n\n        return this;\n    }\n\n    /**\n     * @protected\n     *\n     * @return {?string} Entry file path of this module in `./node_modules/`\n     */\n    searchNPM() {\n\n        for (let method  of  ['getNPMFile', 'getNPMPackage', 'getNPMIndex']) {\n\n            let path;\n\n            if (path = Utility[method]( this.name ))  return path;\n        }\n    }\n\n    /**\n     * @protected\n     *\n     * @return {string} Original source code of this module\n     */\n    load() {\n\n        this.source = readFileSync(\n            ((! this.dependency.outside)  &&  /^\\w/.test( this.name ))  ?\n                this.searchNPM()  :  join(this.path, `${this.name}.js`)\n        );\n\n        return  this.source = (this.source + '').replace(/\\r\\n/g, '\\n');\n    }\n\n    /**\n     * @param {string} module - Module name from source code\n     *\n     * @emits {ReplaceEvent}\n     *\n     * @return {?string} New module name if `module` is matched in the name map\n     */\n    mapName(module) {\n\n        for (let [oldName, newName]  of  this.nameMap) {\n\n            let match = (oldName instanceof RegExp)  &&  oldName.exec( module );\n\n            match = (match || [ ]).filter( Boolean );\n\n            if (match[0]  ||  (oldName === module)) {\n\n                this.emit('replace', module, newName);    return newName;\n            }\n        }\n    }\n\n    /**\n     * Add a depended module of this module\n     *\n     * @protected\n     *\n     * @param {string} type      - `compile` for AMD & `runtime` for CJS\n     * @param {string} name      - Name of a module\n     * @param {string} [varName] - Variable name of a module in another module\n     */\n    addChild(type, name, varName) {\n\n        if ((type === 'compile')  &&  AMD_CJS.includes( name ))  return;\n\n        name = /^\\w/.test( name )  ?  name  :  (\n            './'  +  join(this.base, name).replace(/\\\\/g, '/')\n        );\n\n        const newName = this.mapName( name );  name = newName || name;\n\n        if (this.dependency.outside  &&  (name[0] !== '.'))  type = 'outside';\n\n        this.dependency[ type ][ name ] = varName  ||  Module.identifierOf( name );\n\n        return newName;\n    }\n\n    /**\n     * @protected\n     *\n     * @return {DependencyMap} Compile-time dependency\n     */\n    parseAMD() {\n\n        this.source = this.source.replace(\n            /define\\((?:\\s*\\[([\\s\\S]*?)\\]\\s*,)?\\s*function\\s*\\(([\\s\\S]*?)\\)\\s*\\{([\\s\\S]+)\\}\\s*\\);?/,\n            (_, modName, varName, body) => {\n\n                var index = 0;  varName = varName.trim().split( /\\s*,\\s*/ );\n\n                (modName || '').replace(\n                    /(?:'|\")(.+?)(?:'|\")/g,\n                    (_, name)  =>  {\n\n                        this.addChild('compile', name, varName[index]),  index++;\n                    }\n                );\n\n                return  body.replace(/^\\n([\\s\\S]+)\\n$/, '$1');\n            }\n        );\n\n        return this.dependency.compile;\n    }\n\n    /**\n     * @protected\n     *\n     * @return {DependencyMap} Runtime dependency\n     */\n    parseCJS() {\n\n        this.source = this.source.replace(\n            /((?:var|let|const)\\s+[\\s\\S]+?=\\s*)?require\\(\\s*(?:'|\")(.+?)(?:'|\")\\s*\\)/mg,\n            (_, assign, modName)  =>\n                `${assign || ''}require('${\n                    this.addChild('runtime', modName)  ||  modName\n                }')`\n        );\n\n        return this.dependency.runtime;\n    }\n\n    /**\n     * @return {string} Factory code of this parsed module\n     */\n    parse() {\n\n        this.load();\n\n        this.parseAMD();\n\n        this.parseCJS();\n\n        return  this.source = `function ${this.identifier}(${\n\n            Object.values( this.dependency.compile ).concat( AMD_CJS ).join(', ')\n        }) {${\n            this.source\n        }}`;\n    }\n\n    /**\n     * @return {string} Factory code of this parsed module\n     */\n    toString() {\n\n        return  ('source' in this)  ?  (this.source + '')  :  '';\n    }\n}\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/source/Module.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 58,
    "kind": "variable",
    "name": "AMD_CJS",
    "memberof": "source/Module.js",
    "static": true,
    "longname": "source/Module.js~AMD_CJS",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/Module.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 10,
    "undocument": true,
    "type": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 59,
    "kind": "typedef",
    "name": "DependencyMap",
    "memberof": "source/Module.js",
    "static": true,
    "longname": "source/Module.js~DependencyMap",
    "access": "public",
    "description": "Key for module path & value for local variable",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "DependencyMap"
    }
  },
  {
    "__docId__": 60,
    "kind": "class",
    "name": "Module",
    "memberof": "source/Module.js",
    "static": true,
    "longname": "source/Module.js~Module",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/Module.js",
    "importStyle": "Module",
    "description": "CommonJS or AMD module",
    "lineNumber": 22,
    "interface": false,
    "extends": [
      "events~EventEmitter"
    ]
  },
  {
    "__docId__": 61,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 29,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Path of this module"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "'.'",
        "defaultRaw": "'.'",
        "name": "path",
        "description": "Root path of the package which this module belongs to"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "includeAll",
        "description": "Treat NPM modules as CommonJS modules"
      },
      {
        "nullable": null,
        "types": [
          "Map"
        ],
        "spread": false,
        "optional": true,
        "name": "nameMap",
        "description": "Map to replace some dependencies to others"
      }
    ]
  },
  {
    "__docId__": 62,
    "kind": "member",
    "name": "base",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#base",
    "access": "public",
    "description": "Directory path of this module",
    "lineNumber": 42,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 63,
    "kind": "member",
    "name": "path",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#path",
    "access": "public",
    "description": "Root path of the package which this module belongs to",
    "lineNumber": 49,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 64,
    "kind": "member",
    "name": "dependency",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#dependency",
    "access": "public",
    "description": "",
    "lineNumber": 57,
    "properties": [
      {
        "nullable": null,
        "types": [
          "DependencyMap"
        ],
        "spread": false,
        "optional": false,
        "name": "compile",
        "description": "Compile-time dependency from AMD"
      },
      {
        "nullable": null,
        "types": [
          "DependencyMap"
        ],
        "spread": false,
        "optional": false,
        "name": "runtime",
        "description": "Runtime dependency from CommonJS"
      },
      {
        "nullable": null,
        "types": [
          "DependencyMap"
        ],
        "spread": false,
        "optional": false,
        "name": "outside",
        "description": "Outside dependency from NPM"
      }
    ],
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 65,
    "kind": "member",
    "name": "nameMap",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#nameMap",
    "access": "public",
    "description": "Key for original name of a module & value for module name of the replacement",
    "lineNumber": 68,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 66,
    "kind": "member",
    "name": "referCount",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#referCount",
    "access": "public",
    "description": "Count of direct references to this module",
    "lineNumber": 75,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 67,
    "kind": "member",
    "name": "depth",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#depth",
    "access": "public",
    "description": "Depth of this module on the dependency tree",
    "lineNumber": 82,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 68,
    "kind": "method",
    "name": "identifierOf",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/Module.js~Module.identifierOf",
    "access": "protected",
    "description": "",
    "lineNumber": 92,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of a module"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 69,
    "kind": "get",
    "name": "identifier",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#identifier",
    "access": "public",
    "description": "Identifier of this module in JS code",
    "lineNumber": 99,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 70,
    "kind": "get",
    "name": "dependencyPath",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#dependencyPath",
    "access": "public",
    "description": "Paths of all the dependency needed to be bundled",
    "lineNumber": 106,
    "type": {
      "nullable": null,
      "types": [
        "string[]"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 71,
    "kind": "method",
    "name": "countUp",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#countUp",
    "access": "protected",
    "description": "",
    "lineNumber": 120,
    "params": [
      {
        "nullable": null,
        "types": [
          "number"
        ],
        "spread": false,
        "optional": false,
        "name": "depth",
        "description": "New depth of this module"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Module"
      ],
      "spread": false,
      "description": "This module"
    }
  },
  {
    "__docId__": 73,
    "kind": "method",
    "name": "searchNPM",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#searchNPM",
    "access": "protected",
    "description": "",
    "lineNumber": 132,
    "return": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Entry file path of this module in `./node_modules/`"
    },
    "params": []
  },
  {
    "__docId__": 74,
    "kind": "method",
    "name": "load",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#load",
    "access": "protected",
    "description": "",
    "lineNumber": 147,
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Original source code of this module"
    },
    "params": []
  },
  {
    "__docId__": 75,
    "kind": "member",
    "name": "source",
    "memberof": "source/Module.js~Module",
    "static": false,
    "longname": "source/Module.js~Module#source",
    "access": "public",
    "description": null,
    "lineNumber": 149,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 76,
    "kind": "method",
    "name": "mapName",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#mapName",
    "access": "public",
    "description": "",
    "lineNumber": 164,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "module",
        "description": "Module name from source code"
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "New module name if `module` is matched in the name map"
    },
    "emits": [
      {
        "types": [
          "ReplaceEvent"
        ],
        "description": ""
      }
    ]
  },
  {
    "__docId__": 77,
    "kind": "method",
    "name": "addChild",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#addChild",
    "access": "protected",
    "description": "Add a depended module of this module",
    "lineNumber": 188,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "type",
        "description": "`compile` for AMD & `runtime` for CJS"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of a module"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "varName",
        "description": "Variable name of a module in another module"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 78,
    "kind": "method",
    "name": "parseAMD",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#parseAMD",
    "access": "protected",
    "description": "",
    "lineNumber": 210,
    "return": {
      "nullable": null,
      "types": [
        "DependencyMap"
      ],
      "spread": false,
      "description": "Compile-time dependency"
    },
    "params": []
  },
  {
    "__docId__": 80,
    "kind": "method",
    "name": "parseCJS",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#parseCJS",
    "access": "protected",
    "description": "",
    "lineNumber": 238,
    "return": {
      "nullable": null,
      "types": [
        "DependencyMap"
      ],
      "spread": false,
      "description": "Runtime dependency"
    },
    "params": []
  },
  {
    "__docId__": 82,
    "kind": "method",
    "name": "parse",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#parse",
    "access": "public",
    "description": "",
    "lineNumber": 254,
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Factory code of this parsed module"
    },
    "params": []
  },
  {
    "__docId__": 83,
    "kind": "method",
    "name": "toString",
    "memberof": "source/Module.js~Module",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Module.js~Module#toString",
    "access": "public",
    "description": "",
    "lineNumber": 273,
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Factory code of this parsed module"
    },
    "params": []
  },
  {
    "__docId__": 84,
    "kind": "file",
    "name": "source/Package.js",
    "content": "import {basename, dirname} from 'path';\n\nimport Module from './Module';\n\nimport {merge} from './utility';\n\nconst Array_iterator = [ ][Symbol.iterator], Array_proto = Array.prototype;\n\nvar depth = 0;\n\n\n/**\n * Package to be bundled\n */\nexport default  class Package {\n    /**\n     * @param {string}  path               - The entry file path of this package\n     *                                       (relative to `process.cwd()`)\n     * @param {boolean} [includeAll=false] - Include NPM modules in the final bundle\n     * @param {?Map}    [moduleMap]        - Map to replace some dependencies to others\n     * @param {boolean} [noLog=false]      - Disable log output\n     */\n    constructor(path,  includeAll = false,  moduleMap,  noLog = false) {\n        /**\n         * The entry file path of this package\n         *\n         * @type {string}\n         */\n        this.path = path;\n\n        /**\n         * The root path of this package (relative to `process.cwd()`)\n         *\n         * @type {string}\n         */\n        this.base = dirname( path );\n\n        /**\n         * Whether include NPM modules in the final bundle\n         *\n         * @type {boolean}\n         */\n        this.includeAll = includeAll;\n\n        /**\n         * Module count of this package\n         *\n         * @type {number}\n         */\n        this.length = 0;\n\n        /**\n         * Key for original name of a module & value for module name of the replacement\n         *\n         * @type {Object}\n         */\n        this.moduleMap = moduleMap;\n\n        /**\n         * Whether show logs during the bundle process\n         *\n         * @type {boolean}\n         */\n        this.showLog = (! noLog);\n    }\n\n    [Symbol.iterator]() {  return  Array_iterator.call( this );  }\n\n    /**\n     * @param {Module|string} module - Instance or name of a module\n     *\n     * @return {number}\n     */\n    indexOf(module) {\n\n        for (let i = 0;  this[i];  i++)\n            if (\n                (module instanceof Module)  ?\n                    (module === this[i])  :  (module === this[i].name)\n            )\n                return i;\n\n        return -1;\n    }\n\n    /**\n     * @protected\n     *\n     * @param {string} modName - Path of a module\n     *\n     * @return {?Module} New module\n     */\n    register(modName) {\n\n        const index = this.indexOf( modName );\n\n        if (index < 0) {\n\n            Array_proto.unshift.call(\n                this,\n                new Module(modName, this.base, this.includeAll, this.moduleMap)\n            );\n\n            return  this[0].countUp( depth );\n        } else\n            this[ index ].countUp( depth );\n    }\n\n    /**\n     * Entry module of this package\n     *\n     * @type {Module}\n     */\n    get entry() {  return  this[this.length - 1];  }\n\n    /**\n     * @protected\n     *\n     * @param {string} modName - Path of a module\n     */\n    parse(modName) {\n\n        depth++;\n\n        const module = this.register( modName );\n\n        if (! module)  return;\n\n        if ( this.showLog )\n            module.on('replace',  (oldMod, newMod)  =>\n                console.info(\n                    `→ Module \"${oldMod}\" will be replaced by \"${newMod}\"`\n                )\n            );\n\n        module.parse();\n\n        if ( this.showLog )\n            console.info(`√ Module \"${modName}\" has been bundled`);\n\n        for (let path of module.dependencyPath)  this.parse( path );\n\n        depth--;\n    }\n\n    /**\n     * @protected\n     *\n     * @return {Package} This package sorted by module dependency\n     */\n    sort() {\n\n        return  Array_proto.sort.call(this,  (A, B) => {\n\n            const A_D = A.dependencyPath, B_D = B.dependencyPath;\n\n            if (B_D.includes( A.name ))  return -1;\n\n            if (A_D.includes( B.name ))  return 1;\n\n            return  (B.depth - A.depth)  ||\n                (A_D.length - B_D.length)  ||  (B.referCount - A.referCount);\n        });\n    }\n\n    /**\n     * Outside dependencies of this package\n     *\n     * @type {DependencyMap}\n     */\n    get outDependency() {\n\n        return  this.includeAll  ?  [ ]  :  Object.assign(\n            ... Array.from(this,  module => module.dependency.outside)\n        );\n    }\n\n    /**\n     * @protected\n     *\n     * @param {string}                                                 name    - Module name of bundled package\n     * @param {function(modName: string[], varName: string[]): string} bundler\n     *\n     * @return {string} Bundled source with UMD wrapper\n     */\n    wrap(name, bundler) {\n\n        const outside = this.outDependency;\n\n        const modName = Object.keys( outside ), varName = Object.values( outside );\n\n        const dependency = modName[0]  ?  `${JSON.stringify( modName )}, `  :  '';\n\n        return `\n//\n//  Generated by https://www.npmjs.com/package/amd-bundle\n//\n(function (factory) {\n\n    if ((typeof define === 'function')  &&  define.amd)\n        define('${name}', ${dependency}factory);\n    else if (typeof module === 'object')\n        return  module.exports = factory(${modName.map(name => `require('${name}')`)});\n    else\n        return  this.${name} = factory(${modName.map(name => `this.${name}`)});\n\n})(${bundler(modName, varName)});`.trim();\n    }\n\n    /**\n     * @param {string} [name] - Module name of bundled package\n     *                          (Default: The entry module's name)\n     * @return {string} Source code of this package\n     */\n    bundle(name) {\n\n        const entry = basename( this.path );\n\n        this.parse(`./${entry}`);\n\n        return this.sort().wrap(\n            name || entry,\n            (modName, varName) => `function (${varName}) {\n\n    var module = {\n        ${Array.from(\n        this,  item => `'${item.name}':  {exports: { }}`\n    ).concat(\n        modName.map((name, index)  =>  `'${name}':  {exports: ${varName[index]}}`)\n    ).join(',\\n        ')}\n    };\n\n${merge}\n\n    function _require_(base, path) {\n\n        return module[\n            /^\\\\w/.test( path )  ?  path  :  ('./' + merge(base, path))\n        ].exports;\n    }\n\n    var require = _require_.bind(null, './');\n\n${Array.from(this,  item => item.source).join('\\n\\n')}\n\n    ${Array.from(this,  item => `module['${item.name}'].exports = ${item.identifier}(${\n\n        Object.keys( item.dependency.compile ).map(\n            child => `require('${child}')`\n        ).concat(\n            `_require_.bind(null, '${item.base}')`,\n            `require('${item.name}')`,\n            `module['${item.name}']`\n        ).join(', ')\n\n    }) || require('${item.name}');`).join('\\n\\n    ')}\n\n    return require('${this.entry.name}');\n}`);\n    }\n}\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/source/Package.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 85,
    "kind": "variable",
    "name": "Array_iterator",
    "memberof": "source/Package.js",
    "static": true,
    "longname": "source/Package.js~Array_iterator",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/Package.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 86,
    "kind": "variable",
    "name": "depth",
    "memberof": "source/Package.js",
    "static": true,
    "longname": "source/Package.js~depth",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/Package.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 9,
    "undocument": true,
    "type": {
      "types": [
        "number"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 87,
    "kind": "class",
    "name": "Package",
    "memberof": "source/Package.js",
    "static": true,
    "longname": "source/Package.js~Package",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/Package.js",
    "importStyle": "Package",
    "description": "Package to be bundled",
    "lineNumber": 15,
    "interface": false
  },
  {
    "__docId__": 88,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#constructor",
    "access": "public",
    "description": "",
    "lineNumber": 23,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": "The entry file path of this package\n                                      (relative to `process.cwd()`)"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "includeAll",
        "description": "Include NPM modules in the final bundle"
      },
      {
        "nullable": true,
        "types": [
          "Map"
        ],
        "spread": false,
        "optional": true,
        "name": "moduleMap",
        "description": "Map to replace some dependencies to others"
      },
      {
        "nullable": null,
        "types": [
          "boolean"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "false",
        "defaultRaw": false,
        "name": "noLog",
        "description": "Disable log output"
      }
    ]
  },
  {
    "__docId__": 89,
    "kind": "member",
    "name": "path",
    "memberof": "source/Package.js~Package",
    "static": false,
    "longname": "source/Package.js~Package#path",
    "access": "public",
    "description": "The entry file path of this package",
    "lineNumber": 29,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 90,
    "kind": "member",
    "name": "base",
    "memberof": "source/Package.js~Package",
    "static": false,
    "longname": "source/Package.js~Package#base",
    "access": "public",
    "description": "The root path of this package (relative to `process.cwd()`)",
    "lineNumber": 36,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 91,
    "kind": "member",
    "name": "includeAll",
    "memberof": "source/Package.js~Package",
    "static": false,
    "longname": "source/Package.js~Package#includeAll",
    "access": "public",
    "description": "Whether include NPM modules in the final bundle",
    "lineNumber": 43,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 92,
    "kind": "member",
    "name": "length",
    "memberof": "source/Package.js~Package",
    "static": false,
    "longname": "source/Package.js~Package#length",
    "access": "public",
    "description": "Module count of this package",
    "lineNumber": 50,
    "type": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 93,
    "kind": "member",
    "name": "moduleMap",
    "memberof": "source/Package.js~Package",
    "static": false,
    "longname": "source/Package.js~Package#moduleMap",
    "access": "public",
    "description": "Key for original name of a module & value for module name of the replacement",
    "lineNumber": 57,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 94,
    "kind": "member",
    "name": "showLog",
    "memberof": "source/Package.js~Package",
    "static": false,
    "longname": "source/Package.js~Package#showLog",
    "access": "public",
    "description": "Whether show logs during the bundle process",
    "lineNumber": 64,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 95,
    "kind": "method",
    "name": "[Symbol.iterator]",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#[Symbol.iterator]",
    "access": "public",
    "description": null,
    "lineNumber": 67,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 96,
    "kind": "method",
    "name": "indexOf",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#indexOf",
    "access": "public",
    "description": "",
    "lineNumber": 74,
    "params": [
      {
        "nullable": null,
        "types": [
          "Module",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "module",
        "description": "Instance or name of a module"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "number"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 97,
    "kind": "method",
    "name": "register",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#register",
    "access": "protected",
    "description": "",
    "lineNumber": 93,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "modName",
        "description": "Path of a module"
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "Module"
      ],
      "spread": false,
      "description": "New module"
    }
  },
  {
    "__docId__": 98,
    "kind": "get",
    "name": "entry",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#entry",
    "access": "public",
    "description": "Entry module of this package",
    "lineNumber": 114,
    "type": {
      "nullable": null,
      "types": [
        "Module"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 99,
    "kind": "method",
    "name": "parse",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#parse",
    "access": "protected",
    "description": "",
    "lineNumber": 121,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "modName",
        "description": "Path of a module"
      }
    ],
    "return": null
  },
  {
    "__docId__": 100,
    "kind": "method",
    "name": "sort",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#sort",
    "access": "protected",
    "description": "",
    "lineNumber": 151,
    "return": {
      "nullable": null,
      "types": [
        "Package"
      ],
      "spread": false,
      "description": "This package sorted by module dependency"
    },
    "params": []
  },
  {
    "__docId__": 101,
    "kind": "get",
    "name": "outDependency",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#outDependency",
    "access": "public",
    "description": "Outside dependencies of this package",
    "lineNumber": 171,
    "type": {
      "nullable": null,
      "types": [
        "DependencyMap"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 102,
    "kind": "method",
    "name": "wrap",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#wrap",
    "access": "protected",
    "description": "",
    "lineNumber": 186,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Module name of bundled package"
      },
      {
        "nullable": null,
        "types": [
          "function(modName: string[], varName: string[]): string"
        ],
        "spread": false,
        "optional": false,
        "name": "bundler",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Bundled source with UMD wrapper"
    }
  },
  {
    "__docId__": 103,
    "kind": "method",
    "name": "bundle",
    "memberof": "source/Package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "source/Package.js~Package#bundle",
    "access": "public",
    "description": "",
    "lineNumber": 215,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "name",
        "description": "Module name of bundled package\n                         (Default: The entry module's name)"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Source code of this package"
    }
  },
  {
    "__docId__": 104,
    "kind": "file",
    "name": "source/utility.js",
    "content": "import {join} from 'path';\n\nimport {existsSync, readFileSync, statSync} from 'fs';\n\n\n/**\n * @param {string} raw - RegExp literal string\n *\n * @return {?RegExp}\n */\nexport function toRegExp(raw) {\n\n    const match = raw.match( /^\\/(.+)\\/([a-z]+)?$/ );\n\n    if ( match )  return  new RegExp(match[1], match[2]);\n}\n\n\n/**\n * This will be used in the bundled source\n *\n * @param {string} base - Root path\n * @param {string} path - Path relative to `base`\n *\n * @return {string} Joined & normalized path\n */\nexport function merge(base, path) {\n\n    return  (base + '/' + path)\n        .replace(/\\/\\//g, '/')\n        .replace(/[^/.]+\\/\\.\\.\\//g, '')\n        .replace(/\\.\\//g,  function (match, index, input) {\n\n            return  (input[index - 1]  ===  '.')  ?  match  :  '';\n        });\n}\n\n\nfunction inNPM(path) {\n\n    if (existsSync(path = join('node_modules', path)))\n        return  path.replace(/\\\\/g, '/');\n}\n\n\nfunction findNPMFile(list) {\n\n    for (let path of list)  if (path = inNPM( path ))  return path;\n}\n\n\n/**\n * @param {string} name - Name of a module\n *\n * @return {?string} Valid `name` in `./node_modules/` is a JS or JSON file\n */\nexport function getNPMFile(name) {\n\n    return  findNPMFile([name, `${name}.js`, `${name}.json`]);\n}\n\n\n/**\n * @param {string} name - Name of a module\n *\n * @return {?string} Valid `name` in `./node_modules/` is `index.js` or `index.json`\n */\nexport function getNPMIndex(name) {\n\n    return  findNPMFile([`${name}/index.js`, `${name}/index.json`]);\n}\n\n\n/**\n * @param {string} name - Name of a module\n *\n * @return {?string} Entry file path of an existing `package.json`\n */\nexport function getNPMPackage(name) {\n\n    var path = inNPM(`${name}/package.json`);\n\n    if (! path)  return;\n\n    const config = JSON.parse( readFileSync( path ) );\n\n    for (let key  of  ['main', 'browser'])\n        if (path = inNPM( join(name, config[key]) ))\n            return  statSync( path ).isFile()  ?  path  :  getNPMIndex( path );\n}\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/source/utility.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 105,
    "kind": "function",
    "name": "toRegExp",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~toRegExp",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": "{toRegExp}",
    "description": "",
    "lineNumber": 11,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "raw",
        "description": "RegExp literal string"
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "RegExp"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 106,
    "kind": "function",
    "name": "merge",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~merge",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": "{merge}",
    "description": "This will be used in the bundled source",
    "lineNumber": 27,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "base",
        "description": "Root path"
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": "Path relative to `base`"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Joined & normalized path"
    }
  },
  {
    "__docId__": 107,
    "kind": "function",
    "name": "inNPM",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~inNPM",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "params": [
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 108,
    "kind": "function",
    "name": "findNPMFile",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~findNPMFile",
    "access": "public",
    "export": false,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "params": [
      {
        "name": "list",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 109,
    "kind": "function",
    "name": "getNPMFile",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~getNPMFile",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": "{getNPMFile}",
    "description": "",
    "lineNumber": 57,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of a module"
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Valid `name` in `./node_modules/` is a JS or JSON file"
    }
  },
  {
    "__docId__": 110,
    "kind": "function",
    "name": "getNPMIndex",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~getNPMIndex",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": "{getNPMIndex}",
    "description": "",
    "lineNumber": 68,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of a module"
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Valid `name` in `./node_modules/` is `index.js` or `index.json`"
    }
  },
  {
    "__docId__": 111,
    "kind": "function",
    "name": "getNPMPackage",
    "memberof": "source/utility.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "source/utility.js~getNPMPackage",
    "access": "public",
    "export": true,
    "importPath": "amd-bundle/source/utility.js",
    "importStyle": "{getNPMPackage}",
    "description": "",
    "lineNumber": 79,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Name of a module"
      }
    ],
    "return": {
      "nullable": true,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "Entry file path of an existing `package.json`"
    }
  },
  {
    "kind": "index",
    "content": "# AMD bundle\n\n**A dual-use tool for bundling up [AMD](https://github.com/amdjs/amdjs-api/blob/master/AMD.md) & [CJS](http://wiki.commonjs.org/wiki/Modules) modules**,\nwhich is much easier to use than [`r.js`](https://github.com/requirejs/r.js) with [Almond](https://github.com/requirejs/almond) or [AMDclean](https://github.com/gfranko/amdclean).\n\n[![NPM Dependency](https://david-dm.org/TechQuery/AMD_bundle.js.svg)](https://david-dm.org/TechQuery/AMD_bundle.js)\n\n[![NPM](https://nodei.co/npm/amd-bundle.png?downloads=true&downloadRank=true&stars=true)](https://nodei.co/npm/amd-bundle/)\n\n\n\n## Recommended Usage\n\n\n### Basic\n\n```Shell\ncd path/to/project/root\n\nnpm install amd-bundle --save-dev\n\namd-bundle -a \\\n    path/to/project/source/entry \\\n    path/to/project/bundle/file\n```\n\n`amd-bundle` will\n\n 1. start bundling from the entry point `path/to/project/source/entry.js`\n\n 2. write into `path/to/project/bundle/file.js` with only one `define('file', [ ])` and `global.file` definition, just like [UMD](https://github.com/umdjs/umd) style\n\n 3. treat `${process.cwd()}/node_modules/${module_full_name}` as a user's module to pack in\n\n\n### More options\n\n - Command-line: `amd-bundle --help`\n\n - JS Module: https://techquery.github.io/AMD_bundle.js/class/source/Package.js~Package.html#instance-method-bundle\n\n\n### Advanced\n\nBuild **standalone release files** (Full source code, Minimized code & Source map) by executing a single command (`npm run build`).\n\n#### Multiple bundles from one source\n\n - Development dependency: [UglifyJS](http://lisperator.net/uglifyjs/)\n\n - **NPM-scripts** reference: [iQuery.js](https://github.com/TechQuery/iQuery.js/blob/master/package.json#L22)\n\n#### Bundle ECMAScript 6+ codes\n\n - Development dependency: [Babel](https://babeljs.io/)\n\n - **NPM-scripts** reference: [WebCell](https://github.com/EasyWebApp/WebCell/blob/master/package.json#L33)\n\n\n\n## Typical Cases\n\n 1. [iQuery.js](https://github.com/TechQuery/iQuery.js) (where the prototype of `amd-bundle` came from)\n\n 2. [WebCell](https://github.com/EasyWebApp/WebCell) (where `v1.0` rewritten out)\n\n 3. [EasyWebUI](https://github.com/TechQuery/EasyWebUI)\n",
    "longname": "D:\\TechQuery\\AMD_bundle.js\\README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"amd-bundle\",\n  \"version\": \"1.1.4\",\n  \"description\": \"A dual-use tool for bundling up AMD modules, which is much easier to use than r.js with Almond or AMDclean\",\n  \"main\": \"build/Package.js\",\n  \"bin\": \"build/index.js\",\n  \"engines\": {\n    \"node\": \"^6.5.0\"\n  },\n  \"scripts\": {\n    \"lint\": \"eslint index.js source/ test/\",\n    \"check\": \"mocha -r babel-register -r babel-polyfill -r should -c --inline-diffs\",\n    \"test\": \"npm run check -- --exit\",\n    \"debug\": \"npm run check -- --inspect-brk\",\n    \"install\": \"node install\",\n    \"prepublishOnly\": \"babel source/ --out-dir build/\",\n    \"build\": \"esdoc  &&  npm run prepublishOnly\",\n    \"start\": \"web-server docs/ -o\",\n    \"precommit\": \"npm run lint  &&  npm test\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/TechQuery/AMD_bundle.js.git\"\n  },\n  \"keywords\": [\n    \"javascript\",\n    \"amd-loader\",\n    \"bundle\",\n    \"require-js\",\n    \"command-line\"\n  ],\n  \"author\": \"shiy007@qq.com\",\n  \"license\": \"AGPL-3.0\",\n  \"bugs\": {\n    \"url\": \"https://github.com/TechQuery/AMD_bundle.js/issues\"\n  },\n  \"homepage\": \"https://techquery.github.io/AMD_bundle.js/\",\n  \"dependencies\": {\n    \"babel-polyfill\": \"^6.26.0\",\n    \"babel-runtime\": \"^6.26.0\",\n    \"commander\": \"^2.11.0\",\n    \"fs-extra\": \"^6.0.1\"\n  },\n  \"devDependencies\": {\n    \"babel-cli\": \"^6.26.0\",\n    \"babel-plugin-transform-runtime\": \"^6.23.0\",\n    \"babel-preset-env\": \"^1.7.0\",\n    \"babel-register\": \"^6.26.0\",\n    \"esdoc\": \"^1.1.0\",\n    \"esdoc-external-nodejs-plugin\": \"^1.0.0\",\n    \"esdoc-standard-plugin\": \"^1.0.0\",\n    \"eslint\": \"^4.19.1\",\n    \"husky\": \"^0.14.3\",\n    \"koapache\": \"^0.2.3\",\n    \"mocha\": \"^5.2.0\",\n    \"should\": \"^13.2.1\"\n  },\n  \"babel\": {\n    \"presets\": [\n      \"env\"\n    ],\n    \"plugins\": [\n      \"transform-runtime\"\n    ]\n  }\n}\n",
    "longname": "D:\\TechQuery\\AMD_bundle.js\\package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  },
  {
    "__docId__": 112,
    "kind": "testFile",
    "name": "test/example/a.js",
    "content": "require('./libs/b');\n\nmodule.exports = 'This is A';\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/test/example/a.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 113,
    "kind": "testFile",
    "name": "test/example/c.js",
    "content": "require('./libs/b');\n\nmodule.exports = 'This is C';\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/test/example/c.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 114,
    "kind": "testFile",
    "name": "test/example/index.js",
    "content": "/* AMD module */\ndefine(['./a', 'require', 'exports', 'module'],  function (A, require) {\n\n    var C = require('./c');\n\n    return  {a: A, c: C, test: require('test')};\n});\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/test/example/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 115,
    "kind": "testFile",
    "name": "test/example/libs/b.js",
    "content": "require('../c');\n\nmodule.exports = 'This is B';\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/test/example/libs/b.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 116,
    "kind": "testFile",
    "name": "test/index.js",
    "content": "import {execSync} from 'child_process';\n\nimport {readFileSync, removeSync} from 'fs-extra';\n\nimport {\n    toRegExp, merge, getNPMFile, getNPMIndex, getNPMPackage\n} from '../source/utility';\n\nimport Module from '../source/Module';\n\nimport Package from '../source/Package';\n\nvar bundle_code;\n\n\ndescribe('Utility',  () => {\n    /**\n     * @test {toRegExp}\n     */\n    it('Create RegExp() from a literal string',  () => {\n\n        toRegExp('/polyfill|ext\\\\//ig').should.be.eql( /polyfill|ext\\//gi );\n\n        (toRegExp('test') === undefined).should.be.true();\n    });\n\n    /**\n     * @test {merge}\n     */\n    it('Merge module paths',  () => {\n\n        merge('./../test//../', './example').should.be.equal('../example');\n    });\n\n    /**\n     * @test {getNPMFile}\n     */\n    it('Get path of JS modules',  () => {\n\n        getNPMFile('test').should.be.equal('node_modules/test.js');\n    });\n\n    /**\n     * @test {getNPMIndex}\n     */\n    it('Get \"index.js\" path of a module',  () => {\n\n        getNPMIndex('koapache/source').should.be.equal(\n            'node_modules/koapache/source/index.js'\n        );\n    });\n\n    /**\n     * @test {getNPMPackage}\n     */\n    it('Get entry file path from \"package.json\" of a module',  () => {\n\n        getNPMPackage('koapache').should.be.equal(\n            'node_modules/koapache/source/index.js'\n        );\n    });\n});\n\n\n/**\n * @test {Module}\n */\ndescribe('Module parser',  () => {\n\n    var module;\n\n    before(()  =>  (module = new Module('./index', './test/example/')).load());\n\n    /**\n     * @test {Module#parseAMD}\n     */\n    it('Parse AMD',  () => {\n\n        module.parseAMD().should.be.eql( {'./a': 'A'} );\n\n        (module + '').should.be.equal(`/* AMD module */\n\n    var C = require('./c');\n\n    return  {a: A, c: C, test: require('test')};\n`);\n    });\n\n    /**\n     * @test {Module#parseCJS}\n     */\n    it('Parse CommonJS',  () => {\n\n        module.parseCJS().should.be.eql( {'./c': '_c'} );\n    });\n\n    /**\n     * @test {Module#parse}\n     */\n    it('Parse all',  () => module.parse().should.be.equal(`\n\nfunction _index(A, require, exports, module) {/* AMD module */\n\n    var C = require('./c');\n\n    return  {a: A, c: C, test: require('test')};\n}`.trim())\n    );\n\n    /**\n     * @test {Module#dependencyPath}\n     */\n    it('Get paths of the dependency',  () => {\n\n        module.dependencyPath.should.be.eql( ['./a', './c'] );\n    });\n\n    /**\n     * @test {Module#mapName}\n     */\n    it('Replace a dependency',  () => {\n\n        module = new Module(\n            './index',  './test/example/',  true,  new Map([['test', 'jquery']])\n        );\n\n        module.parse().should.be.equal(`\n\nfunction _index(A, require, exports, module) {/* AMD module */\n\n    var C = require('./c');\n\n    return  {a: A, c: C, test: require('jquery')};\n}`.trim());\n\n        module.dependencyPath.should.be.containEql('jquery');\n    });\n});\n\n\n/**\n * @test {Package}\n */\ndescribe('Package bundler',  () => {\n\n    var pack = new Package('');\n\n    /**\n     * @test {Package#register}\n     */\n    it('Register module',  () => {\n\n        pack.register('a');\n\n        pack.register('b');\n\n        pack.register('c');\n\n        pack.register('b');\n\n        Array.from(pack,  module => module.name).should.be.eql(['c', 'b', 'a']);\n    });\n\n    /**\n     * @test {Package#parse}\n     * @test {Package#sort}\n     */\n    it('Parse package',  () => {\n\n        pack = new Package('./test/example/index', null, null, true);\n\n        pack.parse('./index');\n\n        Array.from(\n            pack.sort(),  module => ({\n                name:        module.name,\n                depth:       module.depth,\n                referCount:  module.referCount\n            })\n        ).should.be.eql([\n            {\n                name:        './c',\n                depth:       4,\n                referCount:  2\n            },\n            {\n                name:        './libs/b',\n                depth:       5,\n                referCount:  2\n            },\n            {\n                name:        './a',\n                depth:       2,\n                referCount:  1\n            },\n            {\n                name:        './index',\n                depth:       1,\n                referCount:  1\n            }\n        ]);\n    });\n\n    /**\n     * @test {Package#wrap}\n     */\n    it('UMD wrapper',  () => {\n\n        pack.wrap(\n            'example',\n            (modName, varName)  =>\n                `function (${varName}) {  ${JSON.stringify( modName )};  }`\n        ).should.be.equal(`\n//\n//  Generated by https://www.npmjs.com/package/amd-bundle\n//\n(function (factory) {\n\n    if ((typeof define === 'function')  &&  define.amd)\n        define('example', [\"test\"], factory);\n    else if (typeof module === 'object')\n        return  module.exports = factory(require('test'));\n    else\n        return  this.example = factory(this.test);\n\n})(function (test) {  [\"test\"];  });`.trim());\n    });\n\n    function testBundle(all) {\n\n        bundle_code = (new Package(\n            './test/example/index', all, null, true\n        )).bundle();\n\n        try {\n            eval( bundle_code ).should.be.eql({\n                a:     'This is A',\n                c:     'This is C',\n                test:  {test: 1}\n            });\n        } catch (error) {\n\n            console.warn( bundle_code );  throw error;\n        }\n    }\n\n    /**\n     * @test {Package#bundle}\n     */\n    it('Bundle all dependencies',  testBundle.bind(null, true));\n\n    /**\n     * @test {Package#bundle}\n     */\n    it('Bundle without NPM packages',  testBundle.bind(null, false));\n});\n\n\ndescribe('Command line',  () => {\n\n    const entry = 'node source/index test/example/index';\n\n    it('Output to a file',  () => {\n\n        (execSync(`${entry} test/example/build`) + '').should.be.startWith(`\n√ Module \"./index\" has been bundled\n√ Module \"./a\" has been bundled\n√ Module \"./libs/b\" has been bundled\n√ Module \"./c\" has been bundled`.trim()\n        );\n    });\n\n    it(\n        'Write into stdout without printing',\n        ()  =>  (execSync(`${entry} -s`) + '').should.be.eql( bundle_code )\n    );\n\n\n    it('Replace a module by the map option',  () => {\n\n        (execSync(`${entry} test/example/build -m /T/i:jquery`) + '')\n            .should.be.startWith(`\n→ Module \"test\" will be replaced by \"jquery\"\n√ Module \"./index\" has been bundled\n√ Module \"./a\" has been bundled\n√ Module \"./libs/b\" has been bundled\n√ Module \"./c\" has been bundled`.trim()\n            );\n\n        (readFileSync('test/example/build.js') + '').should.be.equal(\n            bundle_code\n                .replace(/test([^:(])/g, 'jquery$1')\n                .replace(/('|\\.)index/g, '$1build')\n        );\n    });\n\n\n    after(() => removeSync('test/example/build.js'));\n});\n",
    "static": true,
    "longname": "D:/TechQuery/AMD_bundle.js/test/index.js",
    "access": null,
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 117,
    "kind": "test",
    "name": "describe0",
    "testId": 0,
    "memberof": "test/index.js",
    "testDepth": 0,
    "static": true,
    "longname": "test/index.js~describe0",
    "access": null,
    "description": "Utility",
    "lineNumber": 16
  },
  {
    "__docId__": 118,
    "kind": "test",
    "name": "it1",
    "testId": 1,
    "memberof": "test/index.js~describe0",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe0.it1",
    "access": null,
    "description": "Create RegExp() from a literal string",
    "lineNumber": 20,
    "testTargets": [
      "toRegExp"
    ]
  },
  {
    "__docId__": 119,
    "kind": "test",
    "name": "it2",
    "testId": 2,
    "memberof": "test/index.js~describe0",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe0.it2",
    "access": null,
    "description": "Merge module paths",
    "lineNumber": 30,
    "testTargets": [
      "merge"
    ]
  },
  {
    "__docId__": 120,
    "kind": "test",
    "name": "it3",
    "testId": 3,
    "memberof": "test/index.js~describe0",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe0.it3",
    "access": null,
    "description": "Get path of JS modules",
    "lineNumber": 38,
    "testTargets": [
      "getNPMFile"
    ]
  },
  {
    "__docId__": 121,
    "kind": "test",
    "name": "it4",
    "testId": 4,
    "memberof": "test/index.js~describe0",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe0.it4",
    "access": null,
    "description": "Get \"index.js\" path of a module",
    "lineNumber": 46,
    "testTargets": [
      "getNPMIndex"
    ]
  },
  {
    "__docId__": 122,
    "kind": "test",
    "name": "it5",
    "testId": 5,
    "memberof": "test/index.js~describe0",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe0.it5",
    "access": null,
    "description": "Get entry file path from \"package.json\" of a module",
    "lineNumber": 56,
    "testTargets": [
      "getNPMPackage"
    ]
  },
  {
    "__docId__": 123,
    "kind": "test",
    "name": "describe6",
    "testId": 6,
    "memberof": "test/index.js",
    "testDepth": 0,
    "static": true,
    "longname": "test/index.js~describe6",
    "access": null,
    "description": "Module parser",
    "lineNumber": 68,
    "testTargets": [
      "Module"
    ]
  },
  {
    "__docId__": 124,
    "kind": "test",
    "name": "it7",
    "testId": 7,
    "memberof": "test/index.js~describe6",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe6.it7",
    "access": null,
    "description": "Parse AMD",
    "lineNumber": 77,
    "testTargets": [
      "Module#parseAMD"
    ]
  },
  {
    "__docId__": 125,
    "kind": "test",
    "name": "it8",
    "testId": 8,
    "memberof": "test/index.js~describe6",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe6.it8",
    "access": null,
    "description": "Parse CommonJS",
    "lineNumber": 92,
    "testTargets": [
      "Module#parseCJS"
    ]
  },
  {
    "__docId__": 126,
    "kind": "test",
    "name": "it9",
    "testId": 9,
    "memberof": "test/index.js~describe6",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe6.it9",
    "access": null,
    "description": "Parse all",
    "lineNumber": 100,
    "testTargets": [
      "Module#parse"
    ]
  },
  {
    "__docId__": 127,
    "kind": "test",
    "name": "it10",
    "testId": 10,
    "memberof": "test/index.js~describe6",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe6.it10",
    "access": null,
    "description": "Get paths of the dependency",
    "lineNumber": 113,
    "testTargets": [
      "Module#dependencyPath"
    ]
  },
  {
    "__docId__": 128,
    "kind": "test",
    "name": "it11",
    "testId": 11,
    "memberof": "test/index.js~describe6",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe6.it11",
    "access": null,
    "description": "Replace a dependency",
    "lineNumber": 121,
    "testTargets": [
      "Module#mapName"
    ]
  },
  {
    "__docId__": 129,
    "kind": "test",
    "name": "describe12",
    "testId": 12,
    "memberof": "test/index.js",
    "testDepth": 0,
    "static": true,
    "longname": "test/index.js~describe12",
    "access": null,
    "description": "Package bundler",
    "lineNumber": 144,
    "testTargets": [
      "Package"
    ]
  },
  {
    "__docId__": 130,
    "kind": "test",
    "name": "it13",
    "testId": 13,
    "memberof": "test/index.js~describe12",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe12.it13",
    "access": null,
    "description": "Register module",
    "lineNumber": 151,
    "testTargets": [
      "Package#register"
    ]
  },
  {
    "__docId__": 131,
    "kind": "test",
    "name": "it14",
    "testId": 14,
    "memberof": "test/index.js~describe12",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe12.it14",
    "access": null,
    "description": "Parse package",
    "lineNumber": 168,
    "testTargets": [
      "Package#parse",
      "Package#sort"
    ]
  },
  {
    "__docId__": 132,
    "kind": "test",
    "name": "it15",
    "testId": 15,
    "memberof": "test/index.js~describe12",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe12.it15",
    "access": null,
    "description": "UMD wrapper",
    "lineNumber": 207,
    "testTargets": [
      "Package#wrap"
    ]
  },
  {
    "__docId__": 133,
    "kind": "test",
    "name": "it16",
    "testId": 16,
    "memberof": "test/index.js~describe12",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe12.it16",
    "access": null,
    "description": "Bundle all dependencies",
    "lineNumber": 250,
    "testTargets": [
      "Package#bundle"
    ]
  },
  {
    "__docId__": 134,
    "kind": "test",
    "name": "it17",
    "testId": 17,
    "memberof": "test/index.js~describe12",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe12.it17",
    "access": null,
    "description": "Bundle without NPM packages",
    "lineNumber": 255,
    "testTargets": [
      "Package#bundle"
    ]
  },
  {
    "__docId__": 135,
    "kind": "test",
    "name": "describe18",
    "testId": 18,
    "memberof": "test/index.js",
    "testDepth": 0,
    "static": true,
    "longname": "test/index.js~describe18",
    "access": null,
    "description": "Command line",
    "lineNumber": 259
  },
  {
    "__docId__": 136,
    "kind": "test",
    "name": "it19",
    "testId": 19,
    "memberof": "test/index.js~describe18",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe18.it19",
    "access": null,
    "description": "Output to a file",
    "lineNumber": 263
  },
  {
    "__docId__": 137,
    "kind": "test",
    "name": "it20",
    "testId": 20,
    "memberof": "test/index.js~describe18",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe18.it20",
    "access": null,
    "description": "Write into stdout without printing",
    "lineNumber": 273
  },
  {
    "__docId__": 138,
    "kind": "test",
    "name": "it21",
    "testId": 21,
    "memberof": "test/index.js~describe18",
    "testDepth": 1,
    "static": true,
    "longname": "test/index.js~describe18.it21",
    "access": null,
    "description": "Replace a module by the map option",
    "lineNumber": 279
  }
]